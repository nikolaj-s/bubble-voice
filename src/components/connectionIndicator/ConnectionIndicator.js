import React from 'react'
import { useSelector } from 'react-redux'
import { selectConnectionError, selectConnectionLoading } from '../../features/controlBar/ControlBarSlice';

import { selectTextColor } from '../../features/settings/appSettings/appearanceSettings/appearanceSettingsSlice'
import { Loading } from '../LoadingComponents/Loading/Loading';

export const ConnectionIndicator = ({active}) => {

    const color = useSelector(selectTextColor);

    const loading = useSelector(selectConnectionLoading);

    const error = useSelector(selectConnectionError);

    return (
        <div style={{
            width: 25,
            height: 25,
            padding: "10px",
            opacity: active ? 1 : 0.2,
            position: 'relative'
        }}>
            {!error ? 
            <svg style={{
                width: "100%",
                height: "100%",
                objectFit: 'cover'
            }} width="47" height="47" viewBox="0 0 47 47" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M43.6632 0.195488C20.1196 1.26645 1.21983 20.4211 0.454645 43.9675C0.425855 44.853 1.14181 45.5776 2.02773 45.5684L6.73764 45.5192C7.58282 45.511 8.26967 44.8333 8.30079 43.9885C9.0209 24.6761 24.4809 9.01032 43.7865 8.04001C44.6308 7.99794 45.2989 7.30168 45.2968 6.45715L45.285 1.747C45.282 0.861734 44.5482 0.155226 43.6632 0.195488ZM35.7586 35.6049C33.3334 38.0617 33.3591 42.0183 35.8159 44.4435C38.2727 46.8687 42.2294 46.843 44.6545 44.3862C47.0797 41.9294 47.0541 37.9728 44.5973 35.5476C42.1405 33.1224 38.1838 33.148 35.7586 35.6049ZM43.8533 15.7848C28.8618 16.8024 16.8671 28.9688 16.0451 43.9556C15.9957 44.8537 16.7166 45.5955 17.6149 45.5834L22.3399 45.5217C23.163 45.5109 23.8535 44.867 23.9082 44.0442C24.624 33.2311 33.2649 24.4997 44.043 23.6468C44.865 23.5814 45.5006 22.8833 45.5001 22.0595L45.5006 17.334C45.5017 16.4349 44.7492 15.7237 43.8533 15.7848V15.7848Z" fill={color}/>
            </svg> :
            <svg 
            style={{
                width: "100%",
                height: "100%",
                objectFit: 'cover'
            }}
            width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_932_4)">
            <path d="M25 46.875C19.1984 46.875 13.6344 44.5703 9.53204 40.468C5.42968 36.3656 3.125 30.8016 3.125 25C3.125 19.1984 5.42968 13.6344 9.53204 9.53204C13.6344 5.42968 19.1984 3.125 25 3.125C30.8016 3.125 36.3656 5.42968 40.468 9.53204C44.5703 13.6344 46.875 19.1984 46.875 25C46.875 30.8016 44.5703 36.3656 40.468 40.468C36.3656 44.5703 30.8016 46.875 25 46.875ZM25 50C31.6304 50 37.9893 47.3661 42.6777 42.6777C47.3661 37.9893 50 31.6304 50 25C50 18.3696 47.3661 12.0107 42.6777 7.32233C37.9893 2.63392 31.6304 0 25 0C18.3696 0 12.0107 2.63392 7.32233 7.32233C2.63392 12.0107 0 18.3696 0 25C0 31.6304 2.63392 37.9893 7.32233 42.6777C12.0107 47.3661 18.3696 50 25 50V50Z" fill="#FF0000"/>
            <path d="M14.5189 14.5186C14.664 14.3731 14.8364 14.2577 15.0263 14.1789C15.2161 14.1001 15.4196 14.0596 15.6251 14.0596C15.8306 14.0596 16.0341 14.1001 16.224 14.1789C16.4138 14.2577 16.5862 14.3731 16.7314 14.5186L25.0001 22.7905L33.2689 14.5186C33.4141 14.3733 33.5866 14.2581 33.7764 14.1795C33.9662 14.1009 34.1697 14.0604 34.3751 14.0604C34.5806 14.0604 34.784 14.1009 34.9738 14.1795C35.1636 14.2581 35.3361 14.3733 35.4814 14.5186C35.6266 14.6639 35.7419 14.8364 35.8205 15.0262C35.8991 15.216 35.9396 15.4194 35.9396 15.6249C35.9396 15.8303 35.8991 16.0338 35.8205 16.2236C35.7419 16.4134 35.6266 16.5858 35.4814 16.7311L27.2095 24.9999L35.4814 33.2686C35.6266 33.4139 35.7419 33.5864 35.8205 33.7762C35.8991 33.966 35.9396 34.1694 35.9396 34.3749C35.9396 34.5803 35.8991 34.7838 35.8205 34.9736C35.7419 35.1634 35.6266 35.3358 35.4814 35.4811C35.3361 35.6264 35.1636 35.7416 34.9738 35.8202C34.784 35.8989 34.5806 35.9393 34.3751 35.9393C34.1697 35.9393 33.9662 35.8989 33.7764 35.8202C33.5866 35.7416 33.4141 35.6264 33.2689 35.4811L25.0001 27.2092L16.7314 35.4811C16.5861 35.6264 16.4136 35.7416 16.2238 35.8202C16.034 35.8989 15.8306 35.9393 15.6251 35.9393C15.4197 35.9393 15.2162 35.8989 15.0264 35.8202C14.8366 35.7416 14.6641 35.6264 14.5189 35.4811C14.3736 35.3358 14.2583 35.1634 14.1797 34.9736C14.1011 34.7838 14.0606 34.5803 14.0606 34.3749C14.0606 34.1694 14.1011 33.966 14.1797 33.7762C14.2583 33.5864 14.3736 33.4139 14.5189 33.2686L22.7907 24.9999L14.5189 16.7311C14.3733 16.586 14.2579 16.4135 14.1791 16.2237C14.1004 16.0339 14.0598 15.8304 14.0598 15.6249C14.0598 15.4193 14.1004 15.2158 14.1791 15.026C14.2579 14.8362 14.3733 14.6638 14.5189 14.5186Z" fill="#FF0000"/>
            </g>
            <defs>
            <clipPath id="clip0_932_4">
            <rect width="50" height="50" fill="white"/>
            </clipPath>
            </defs>
            </svg>
            
            }
            <Loading success_size={{width: 20, height: 20}} loading={loading} error={error} />
        </div>
    )
}
